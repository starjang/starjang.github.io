<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>国外第三方登录Tokens时效 | Listen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Facebook登录
Facebook SDK的Tokens有效期是60天。Tokens失效的原因有三种：(1)授权时间超过了60天。(2) 用户授权应用后，修改了账号密码。(3)用户在Account Setting界面的App中删除了授权的应用。
使用+ (FBSDKAccessToken *)currentAccessToken;方法检测Tokens是否可用。如果可用，使用- (instanc">
<meta property="og:type" content="article">
<meta property="og:title" content="国外第三方登录Tokens时效">
<meta property="og:url" content="http://starjang.github.io/2016/06/01/第三方登录Tokens时效/index.html">
<meta property="og:site_name" content="Listen">
<meta property="og:description" content="Facebook登录
Facebook SDK的Tokens有效期是60天。Tokens失效的原因有三种：(1)授权时间超过了60天。(2) 用户授权应用后，修改了账号密码。(3)用户在Account Setting界面的App中删除了授权的应用。
使用+ (FBSDKAccessToken *)currentAccessToken;方法检测Tokens是否可用。如果可用，使用- (instanc">
<meta property="og:updated_time" content="2016-06-01T08:55:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="国外第三方登录Tokens时效">
<meta name="twitter:description" content="Facebook登录
Facebook SDK的Tokens有效期是60天。Tokens失效的原因有三种：(1)授权时间超过了60天。(2) 用户授权应用后，修改了账号密码。(3)用户在Account Setting界面的App中删除了授权的应用。
使用+ (FBSDKAccessToken *)currentAccessToken;方法检测Tokens是否可用。如果可用，使用- (instanc">
  
    <link rel="alternative" href="/atom.xml" title="Listen" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/images/default_avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Listen</a></h1>
		</hgroup>

		
		<p class="header-subtitle">记忆，流年，始于笔尖，盛于心田。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tags/随笔">随笔</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/starjang" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/starzhang" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/AFNetworking/" style="font-size: 10px;">AFNetworking</a> <a href="/tags/Braintree/" style="font-size: 10px;">Braintree</a> <a href="/tags/Facebook/" style="font-size: 10px;">Facebook</a> <a href="/tags/Flurry-Analytics/" style="font-size: 10px;">Flurry Analytics</a> <a href="/tags/Google/" style="font-size: 10px;">Google</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Twitter/" style="font-size: 10px;">Twitter</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/双向认证/" style="font-size: 10px;">双向认证</a> <a href="/tags/境外支付/" style="font-size: 10px;">境外支付</a> <a href="/tags/应用统计/" style="font-size: 10px;">应用统计</a> <a href="/tags/第三方登录/" style="font-size: 10px;">第三方登录</a> <a href="/tags/自签证书/" style="font-size: 10px;">自签证书</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">现职iOS软件开发，对科技充满兴趣。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Listen</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/images/default_avatar.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Listen</h1>
			</hgroup>
			
			<p class="header-subtitle">记忆，流年，始于笔尖，盛于心田。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/starjang" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/starzhang" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-第三方登录Tokens时效" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/01/第三方登录Tokens时效/" class="article-date">
  	<time datetime="2016-05-31T18:36:50.000Z" itemprop="datePublished">2016-06-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      国外第三方登录Tokens时效
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Facebook/">Facebook</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Google/">Google</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Twitter/">Twitter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/第三方登录/">第三方登录</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="Facebook_u767B_u5F55"><a href="#Facebook_u767B_u5F55" class="headerlink" title="Facebook登录"></a><strong>Facebook登录</strong></h4><ol>
<li>Facebook SDK的Tokens有效期是60天。Tokens失效的原因有三种：(1)授权时间超过了60天。(2) 用户授权应用后，修改了账号密码。(3)用户在Account Setting界面的App中删除了授权的应用。</li>
<li>使用<code>+ (FBSDKAccessToken *)currentAccessToken;</code>方法检测Tokens是否可用。如果可用，使用<code>- (instancetype)initWithGraphPath:</code>方法直接获取用户信息。如果不可用，需要<code>- (void)logInWithReadPermissions:</code>方法重新授权后，获取用户信息。</li>
<li>当前Tokens未失效的情况下，可通过<code>+ (void)refreshCurrentAccessToken:</code>方法，可更新许可状态和延长Token过期时间。</li>
<li>如果使用的是iOS，Android或JavaScript SDK，SDK会进行处理确保到期之前令牌被刷新。使用SDK可获取60天有效的长期Tokens，当用户使用App请求Facebook的服务器时，Tokens每天会被刷新一次，如果没有请求，Tokens会在60天后失效，并且需要重新授权获得。</li>
</ol>
<blockquote>
<p>原文：Facebook’s official SDKs manage the lifetime of tokens for you. When using iOS, Android or our JavaScript SDK, the SDK will handle making sure that tokens are refreshed before they expire.</p>
<p>Native mobile apps using Facebook’s SDKs will get long-lived access tokens, good for about 60 days. These tokens will be refreshed once per day when the person using your app makes a request to Facebook’s servers. If no requests are made, the token will expire after about 60 days and the person will have to go through the login flow again to get a new token.</p>
</blockquote>
<a id="more"></a>
<h4 id="Twitter_u767B_u5F55"><a href="#Twitter_u767B_u5F55" class="headerlink" title="Twitter登录"></a><strong>Twitter登录</strong></h4><ol>
<li><p>Twitter的Tokens不失效。</p>
<blockquote>
<p>原文：User and application authentication tokens do not expire.</p>
</blockquote>
</li>
<li><p>使用<code>- (TWTRSession *)session;</code>方法判断用户是否已经授权，如果没有使用<code>- (void)logInWithViewController:</code>方法进行登录，如果已授权，使用<code>- (void)logInWithExistingAuthToken:</code>进行登录，这两种方法均可获取Tokens。</p>
</li>
</ol>
<h4 id="Google_u767B_u5F55"><a href="#Google_u767B_u5F55" class="headerlink" title="Google登录"></a><strong>Google登录</strong></h4><ol>
<li>Google官方文档并未说明Tokens失效时间。可调用<code>-(void)signInSilently;</code>实现静默登录，实现Tokens更新。</li>
<li>在<code>singIn</code>或<code>signInSilenty</code>方法被调用时，SDK 会自动请求Tokens。手动更新调用<code>refreshTokensWithHandler:</code> 方法。如需SDK自动更新调用<code>getTokensWithHandler:</code>方法。 </li>
</ol>
<blockquote>
<p>原文：The Sign-In SDK automatically acquires access tokens, but the access tokens will be refreshed only when you call <code>signIn</code> or <code>signInSilently</code>. To explicitly refresh the access token, call the <code>refreshTokensWithHandler:</code> method. If you need the access token and want the SDK to automatically handle refreshing it, you can use the <code>getTokensWithHandler:</code> method.</p>
</blockquote>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/06/01/Flurry Analytics集成文档/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Flurry Analytics 集成
        
      </div>
    </a>
  
  
    <a href="/2016/02/04/HTTPS双向认证/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">HTTPS双向认证</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="第三方登录Tokens时效" data-title="国外第三方登录Tokens时效" data-url="http://starjang.github.io/2016/06/01/第三方登录Tokens时效/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"starjang"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Listen
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>